(this.webpackJsonpxicoffee=this.webpackJsonpxicoffee||[]).push([[0],{22:function(e,t,c){},25:function(e,t,c){},26:function(e,t,c){},27:function(e,t,c){},29:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(13),a=c.n(n),r=c(6),s=c(2),i=c(9),l=c(1),o=(c(22),c.p+"static/media/logo.bd3b7bcf.png"),d=c(0);function j(e){var t=e.Sidenav,c=Object(l.useRef)(null);return Object(l.useEffect)((function(){t.init(c.current,{})}),[t]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("nav",{className:"grey lighten-2",children:Object(d.jsxs)("div",{className:"container nav-wrapper",children:[Object(d.jsx)("button",{"data-target":"mobile-demo",className:"sidenav-trigger",children:Object(d.jsx)("i",{className:"material-icons",children:"menu"})}),Object(d.jsx)(r.b,{to:"/home",className:"brand-logo center",children:Object(d.jsx)("img",{src:o,height:"60px",alt:"logo"})}),Object(d.jsxs)("ul",{id:"nav-mobile",className:"left hide-on-med-and-down",children:[Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{className:"grey-text text-darken-4",to:"/admin",children:"Admin"})}),Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{className:"grey-text text-darken-4",to:"/home",children:"Home"})}),Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{className:"grey-text text-darken-4",to:"/stats",children:"Stats"})})]})]})}),Object(d.jsxs)("ul",{ref:c,className:"sidenav grey lighten-4 grey-text text-darken-4",id:"mobile-demo",children:[Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{to:"/admin",children:"Admin"})}),Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{to:"/home",children:"Home"})}),Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{to:"/stats",children:"Stats"})})]})]})}var b=c(7),u=c(4),m=c(3),O=c(15),h=c.n(O),x=c(16);function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",c=Object(l.useState)(null),n=Object(m.a)(c,2),a=n[0],r=n[1],s=Object(l.useState)(!1),i=Object(m.a)(s,2),o=i[0],d=i[1],j=Object(l.useState)(null),b=Object(m.a)(j,2),O=b[0],f=b[1],p=Object(l.useState)(null),v=Object(m.a)(p,2),g=v[0],N=v[1],y=function(e){N({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})};return Object(l.useEffect)((function(){var c=new AbortController,n=function(){var t=Object(x.a)(h.a.mark((function t(n){var a,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,t.next=4,fetch(e,Object(u.a)(Object(u.a)({},n),{},{signal:c.signal}));case 4:if((a=t.sent).ok){t.next=7;break}throw new Error("Could not fetch the data");case 7:return t.next=9,a.json();case 9:s=t.sent,r(s),f(null),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),"AbortError"===t.t0.name?console.log("the fetch was aborted"):(f(t.t0.message),console.error(t.t0.message));case 17:return t.prev=17,d(!1),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,14,17,20]])})));return function(e){return t.apply(this,arguments)}}();return"GET"===t&&n(),"POST"===t&&g&&n(g),function(){c.abort()}}),[e,g,t]),{data:a,isPending:o,error:O,postData:y}}var p="http://localhost:5000/product",v="http://localhost:5000/update",g="GET",N="POST";c(25);function y(){return Object(d.jsx)("div",{className:"progress brown darken-3",children:Object(d.jsx)("div",{className:"indeterminate brown lighten-5"})})}function w(){var e=Object(l.useRef)(null);return[Object(l.useCallback)((function(t){if(t)switch(e.current=t,e.current.classList[0]){case"modal":i.Modal.init(e.current,{inDuration:300,outDuration:300,opacity:.5,dismissible:!0,startingTop:"4%",endingTop:"10%"});break;case"dropdown-trigger":i.Dropdown.init(e.current,{inDuration:300,outDuration:300}),i.Dropdown.getInstance(e.current).recalculateDimensions()}}),[e])]}var _=document.getElementById("modal-root");function S(e){var t=e.children;return a.a.createPortal(t,_)}var P=Object(l.forwardRef)((function(e,t){var c=e.items,n=e.onAddProduction,a=c.filter((function(e){return!1===e.isProduction}));return Object(d.jsx)(S,{children:Object(d.jsx)("div",{ref:t,id:"modal_add",className:"modal",children:Object(d.jsx)("div",{className:"modal-content",children:Object(d.jsx)("ul",{className:"collection",children:0!==a.length?a.map((function(e){return Object(d.jsxs)("li",{className:"collection-item avatar",children:[Object(d.jsx)("img",{src:e.img,alt:e.name,className:"circle"}),Object(d.jsx)("span",{className:"title",children:e.name}),Object(d.jsxs)("p",{className:"flow-text",children:["$",e.price,Object(d.jsx)("br",{}),e.desc.substring(0,20),"..."]}),Object(d.jsx)("button",{type:"button",className:"btn secondary-content",onClick:function(){return n(e)},children:"Add"})]},e._id)})):Object(d.jsx)("p",{className:"no-items left",children:"All items in production..."})})})})})})),k=Object(l.forwardRef)((function(e,t){var c=e.onSubmit,n=e.item,a=Object(l.createRef)(),r=Object(l.createRef)(),s=Object(l.createRef)(),i=Object(l.createRef)();return Object(d.jsx)(S,{children:n&&Object(d.jsx)("div",{ref:t,id:n._id,className:"modal",children:Object(d.jsxs)("form",{onSubmit:c(a,r,s,i),children:[Object(d.jsxs)("div",{className:"modal-content",children:[Object(d.jsx)("h4",{children:"Item Editor"}),Object(d.jsxs)("label",{children:["Image:",Object(d.jsx)("input",{required:!0,ref:a,defaultValue:n.img,type:"text"})]}),Object(d.jsxs)("label",{children:["Name:",Object(d.jsx)("input",{required:!0,ref:r,defaultValue:n.name})]}),Object(d.jsxs)("label",{children:["Price:",Object(d.jsx)("input",{type:"number",required:!0,ref:s,defaultValue:n.price})]}),Object(d.jsxs)("label",{children:["Description:",Object(d.jsx)("input",{required:!0,ref:i,defaultValue:n.desc})]})]}),Object(d.jsx)("div",{className:"modal-footer",children:Object(d.jsx)("button",{type:"submit",className:"modal-close waves-effect waves-green btn-flat",children:"Update"})})]})},n._id)})}));function I(e){var t=e.onSubmit,c=e.onAddProduction,n=e.items,a=e.item,r=w(),s=Object(m.a)(r,1)[0];return Object(d.jsxs)(d.Fragment,{children:[a&&Object(d.jsx)(k,{ref:s,item:a,onSubmit:t}),n&&Object(d.jsx)(P,{ref:s,items:n,onAddProduction:c})]})}c(26);function C(e){var t=e.onEditItem,c=e.onRemoveProduction,n=e.items.filter((function(e){return!0===e.isProduction}));return Object(d.jsx)(d.Fragment,{children:n&&0!==n.length?Object(d.jsxs)("table",{className:"centered",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Item Price"}),Object(d.jsx)("th",{children:"Item Option"})]})}),Object(d.jsx)("tbody",{children:n&&n.map((function(e){return!0===e.isProduction&&Object(d.jsxs)("tr",{className:"scale-transition",children:[Object(d.jsx)("td",{children:e.name}),Object(d.jsxs)("td",{children:["$",e.price]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("button",{type:"button","data-target":e._id,className:"waves-effect waves-light btn modal-trigger green accent-4",onClick:function(){return t(e._id)},children:"Edit"}),Object(d.jsx)("button",{type:"button",className:"waves-effect waves-light btn deep-orange accent-4",onClick:function(){c(e)},children:"Delete"})]})]},"item_".concat(e._id))}))})]}):Object(d.jsx)("p",{className:"no-items left",children:"No items to display..."})})}c(27);function E(){var e=Object(l.useState)(p),t=Object(m.a)(e,2),c=t[0],n=t[1],a=Object(l.useState)(g),r=Object(m.a)(a,2),s=r[0],i=r[1],o=f(c,s),j=o.data,O=o.isPending,h=o.error,x=o.postData,w=Object(l.useState)([]),_=Object(m.a)(w,2),S=_[0],P=_[1],k=Object(l.useState)(null),E=Object(m.a)(k,2),D=E[0],A=E[1];Object(l.useEffect)((function(){j&&s===g&&P(j)}),[j,s]);return Object(d.jsxs)("div",{className:"container",children:[h&&Object(d.jsx)("p",{className:"text-red text-accent-4",children:h}),O&&Object(d.jsx)(y,{}),j&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"add-btn right",children:[Object(d.jsx)("span",{children:"Add item"}),Object(d.jsx)("button",{type:"button","data-target":"modal_add",className:"btn-floating btn-large waves-effect waves-light yellow darken-4 modal-trigger",children:Object(d.jsx)("i",{className:"material-icons",children:"add"})})]}),Object(d.jsx)(C,{onRemoveProduction:function(e){n("".concat(v,"/").concat(e._id)),i(N);var t=Object(u.a)(Object(u.a)({},e),{},{isProduction:!1});x(Object(u.a)({},t)),P((function(c){var n=Object(b.a)(c);return n[c.findIndex((function(t){return t._id===e._id}))]=Object(u.a)({_id:e._id},t),n}))},onEditItem:function(e){var t=S.find((function(t){return t._id===e}));A(t)},items:S}),Object(d.jsx)(I,{onSubmit:function(e,t,c,a){return function(r){r.preventDefault();var s={name:t.current.value,desc:a.current.value,price:Number(c.current.value),img:e.current.value,isProduction:!0};n("".concat(v,"/").concat(D._id)),i(N),x(Object(u.a)({},s)),P((function(e){var t=Object(b.a)(e);return t[e.findIndex((function(e){return e._id===D._id}))]=Object(u.a)({_id:D._id},s),t}))}},onAddProduction:function(e){if(S.some((function(t){return t._id===e._id}))){n("".concat(v,"/").concat(e._id)),i(N);var t=Object(u.a)(Object(u.a)({},e),{},{isProduction:!0});x(Object(u.a)({},t)),P((function(c){var n=Object(b.a)(c);return n[c.findIndex((function(t){return t._id===e._id}))]=Object(u.a)({_id:e._id},t),n}))}},item:D,items:S})]})]})}function D(){return Object(d.jsx)("div",{children:Object(d.jsx)("h1",{className:"center",children:"404 Page Not Found"})})}var A=c(10),q="ADD_TO_CART",T="CLEAR_CART",R=c(12),F=c.n(R);var H=[],Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return JSON.parse(localStorage.getItem("cart"))||e},$=function(e,t){var c,n=t.type,a=t.payload;switch(n){case q:var r=e.findIndex((function(e){return e.payload._id===a._id}));if(r>=0){var s=Object(b.a)(e);return s[r]=Object(u.a)(Object(u.a)({},e[r]),{},{quantity:e[r].quantity+1}),s}return[].concat(Object(b.a)(e),[{payload:a,quantity:1,date:(c="YYYY-MM-DD",F()().format(c))}]);case T:return H;default:throw new Error}},J=Object(l.createContext)();function B(e){var t=e.children,c=Object(l.useReducer)($,[],Y),n=Object(m.a)(c,2),a=n[0],r=n[1];return Object(A.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(a))}),[a]),Object(d.jsx)(J.Provider,{value:{cart:a,addToCartHandler:function(e){r({type:q,payload:e})},clearCartHandler:function(){r({type:T})}},children:t})}c(29);function M(e){var t=e.items,c=e.onAdd;return Object(d.jsx)("div",{className:"row",children:0!==t.length?t.map((function(e){return Object(d.jsx)("div",{className:"col s12 m6 l4",children:Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("div",{className:"card-image",children:[Object(d.jsx)("img",{src:e.img,alt:e.name}),Object(d.jsxs)("span",{className:"card-title",children:[" ",e.name," "]})]}),Object(d.jsxs)("div",{className:"card-content",children:[Object(d.jsx)("p",{children:e.desc}),Object(d.jsxs)("span",{children:[" $",e.price," "]})]}),Object(d.jsx)("div",{className:"card-action",children:Object(d.jsxs)("button",{onClick:function(){return c(e)},className:"waves-effect waves-light btn-large pink accent-2",children:[Object(d.jsx)("span",{children:"Buy"}),Object(d.jsx)("i",{className:"small material-icons",children:"add_shopping_cart"})]})})]})},e._id)})):Object(d.jsx)("p",{className:"no-items left",children:"No items to display..."})})}c(30);function V(e){var t=e.cartItems,c=e.totalItems,n=e.totalPrice,a=e.onSubmit,r=w(),s=Object(m.a)(r,1)[0];return Object(d.jsxs)("div",{className:"cart",children:[Object(d.jsxs)("button",{ref:s,className:"dropdown-trigger btn cyan darken-3","data-target":"cart",children:[Object(d.jsx)("i",{className:"material-icons",children:"shopping_cart"}),"Shopping cart",c>0?Object(d.jsx)("span",{className:"new badge blue-text text-darken-4 yellow accent-3",children:c}):Object(d.jsx)("span",{className:"badge white-text deep-orange accent-4",children:" empty "})]}),Object(d.jsx)("form",{onSubmit:a(),id:"cart",className:"dropdown-content collection",children:Object(d.jsx)("ul",{children:0!==t.length?Object(d.jsxs)(d.Fragment,{children:[t.map((function(e,t){var c=e.payload,n=e.quantity;return Object(d.jsx)("li",{className:"collection-item",children:Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[c.name," x ",n]}),Object(d.jsxs)("span",{children:[c.price,"$"]})]})},"".concat(c.name,"_").concat(t))})),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("br",{}),Object(d.jsx)("li",{className:"collection-item",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{children:"Total"}),Object(d.jsxs)("span",{children:[n.toFixed(2),"$"]})]})}),Object(d.jsx)("br",{}),Object(d.jsxs)("button",{className:"right waves-effect waves-light btn pink accent-2",children:["Pay",Object(d.jsx)("i",{className:"material-icons",children:"attach_money"})]})]})]}):Object(d.jsx)("span",{className:"no-items",children:"No items added yet."})})})]})}c(31);function G(){var e=Object(A.useState)(g),t=Object(m.a)(e,2),c=t[0],n=t[1],a=Object(A.useState)(p),r=Object(m.a)(a,2),s=r[0],i=r[1],o=f(s,c),j=o.data,b=o.isPending,u=o.error,O=o.postData,h=Object(A.useState)([]),x=Object(m.a)(h,2),v=x[0],w=x[1],_=function(){var e=Object(l.useContext)(J);if(void 0===e)throw new Error("useCartItem() must be used inside a CartProvider");return e}(),S=_.cart,P=_.addToCartHandler,k=_.clearCartHandler,I=S.reduce((function(e,t){var c=e.totalItems,n=e.totalPrice,a=t.payload,r=t.quantity;return{totalItems:c+r,totalPrice:n+r*a.price}}),{totalItems:0,totalPrice:0}),C=I.totalItems,E=I.totalPrice;Object(l.useEffect)((function(){j&&c===g&&w(j)}),[j,c]);var D=v&&v.filter((function(e){return!0===e.isProduction}));return Object(d.jsxs)("div",{className:"container",children:[u&&Object(d.jsx)("p",{className:"red",children:u}),b&&Object(d.jsx)(y,{}),v&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(V,{onSubmit:function(){return function(e){e.preventDefault(),n(N),i("http://localhost:5000/cart/add"),O(S),k()}},totalItems:C,totalPrice:E,cartItems:S}),Object(d.jsx)(M,{onAdd:function(e){P(e)},items:D})]})]})}c(32);function L(e){var t=e.stats;return Object(d.jsx)("div",{className:"row",children:t.map((function(e){return Object(d.jsx)("div",{className:"col s12 m6 l4",children:Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"card-content black-text",children:[Object(d.jsx)("span",{className:"card-title",children:e.title}),Object(d.jsx)("ul",{className:"collection",children:0!==e.value.length?e.value.map((function(e){return Object(d.jsx)("li",{className:"collection-item",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{children:e.name}),Object(d.jsx)("span",{children:e.totalQuantity})]})},e.name)})):Object(d.jsx)("li",{className:"collection-item",children:"No items to display..."})})]})})},"stat-".concat(e.title))}))})}function Q(e,t,c){return Object.entries(t.map((function(e){return e.cartContent})).flat().reduce((function(e,t){var n="last"===c?t.date:t.payload.name,a=t.quantity>1?t.payload.price*t.quantity:t.payload.price;if("undefined"===typeof e[n])switch(c){case"top":e[n]=t.quantity;break;case"uniq":e[n]=1;break;case"last":e[n]=a}else switch(c){case"top":e[n]+=t.quantity;break;case"uniq":e[n]+=1;break;case"last":e[n]+=a}return e}),{})).sort((function(e,t){return"last"===c?(n=t[0],a=e[0],F()(n).isSame(a)?0:F()(n).isBefore(a)?-1:1):t[1]-e[1];var n,a})).map((function(e){var t,n;return{name:"last"===c?(t=e[0],n="D.M.YY",F()(t).format(n)):e[0],totalQuantity:e[1]}})).slice(0,e)}function U(){var e=f("http://localhost:5000/cart",g),t=e.data,c=e.isPending,n=e.error,a=Object(l.useState)([]),r=Object(m.a)(a,2),s=r[0],i=r[1];Object(l.useEffect)((function(){t&&i(t)}),[t]);var o=s&&[{title:"Top 5 sales",value:Q(5,s,"top")},{title:"Top 5 unique sales",value:Q(5,s,"uniq")},{title:"Sold out the last 5 days $",value:Q(5,s,"last")}];return Object(d.jsxs)("div",{className:"container",children:[n&&Object(d.jsx)("p",{className:"red",children:n}),c&&Object(d.jsx)(y,{}),t&&Object(d.jsx)(L,{stats:o})]})}var z=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(r.a,{children:[Object(d.jsx)(j,{Sidenav:i.Sidenav}),Object(d.jsxs)(s.c,{children:[Object(d.jsx)(s.a,{path:"/",element:Object(d.jsx)(G,{})}),Object(d.jsx)(s.a,{path:"/admin",element:Object(d.jsx)(E,{})}),Object(d.jsx)(s.a,{path:"/home",element:Object(d.jsx)(G,{})}),Object(d.jsx)(s.a,{path:"/stats",element:Object(d.jsx)(U,{})}),Object(d.jsx)(s.a,{path:"*",element:Object(d.jsx)(D,{})})]})]})})};c(33),c(34),c(35);a.a.render(Object(d.jsx)(B,{children:Object(d.jsx)(z,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.b0a27355.chunk.js.map